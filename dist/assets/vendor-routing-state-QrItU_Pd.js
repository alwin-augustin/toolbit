import{p as q,q as B}from"./vendor-misc-LEklij9m.js";import{r as m,u as H}from"./vendor-react-BRDxYWww.js";const C=t=>{let e;const n=new Set,r=(a,l)=>{const y=typeof a=="function"?a(e):a;if(!Object.is(y,e)){const f=e;e=l??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(d=>d(e,f))}},s=()=>e,i={setState:r,getState:s,getInitialState:()=>h,subscribe:a=>(n.add(a),()=>n.delete(a))},h=e=t(r,s,i);return i},ut=t=>t?C(t):C;function M(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const u=h=>h===null?null:JSON.parse(h,void 0),i=(o=n.getItem(s))!=null?o:null;return i instanceof Promise?i.then(u):u(i)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const x=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return x(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return x(r)(n)}}}},G=(t,e)=>(n,r,s)=>{let o={storage:M(()=>localStorage),partialize:c=>c,version:0,merge:(c,v)=>({...v,...c}),...e},u=!1;const i=new Set,h=new Set;let a=o.storage;if(!a)return t((...c)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...c)},r,s);const l=()=>{const c=o.partialize({...r()});return a.setItem(o.name,{state:c,version:o.version})},y=s.setState;s.setState=(c,v)=>(y(c,v),l());const f=t((...c)=>(n(...c),l()),r,s);s.getInitialState=()=>f;let d;const S=()=>{var c,v;if(!a)return;u=!1,i.forEach(p=>{var g;return p((g=r())!=null?g:f)});const P=((v=o.onRehydrateStorage)==null?void 0:v.call(o,(c=r())!=null?c:f))||void 0;return x(a.getItem.bind(a))(o.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==o.version){if(o.migrate){const g=o.migrate(p.state,p.version);return g instanceof Promise?g.then(R=>[!0,R]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var g;const[R,$]=p;if(d=o.merge($,(g=r())!=null?g:f),n(d,!0),R)return l()}).then(()=>{P==null||P(d,void 0),d=r(),u=!0,h.forEach(p=>p(d))}).catch(p=>{P==null||P(void 0,p)})};return s.persist={setOptions:c=>{o={...o,...c},c.storage&&(a=c.storage)},clearStorage:()=>{a==null||a.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>S(),hasHydrated:()=>u,onHydrate:c=>(i.add(c),()=>{i.delete(c)}),onFinishHydration:c=>(h.add(c),()=>{h.delete(c)})},o.skipHydration||S(),d||f},lt=G,Q="popstate",I="pushState",w="replaceState",W="hashchange",L=[Q,I,w,W],X=t=>{for(const e of L)addEventListener(e,t);return()=>{for(const e of L)removeEventListener(e,t)}},F=(t,e)=>q.useSyncExternalStore(X,t,e),Y=()=>location.search,Z=({ssrSearch:t=""}={})=>F(Y,()=>t),k=()=>location.pathname,z=({ssrPath:t}={})=>F(k,t?()=>t:k),V=(t,{replace:e=!1,state:n=null}={})=>history[e?w:I](n,"",t),tt=(t={})=>[z(t),V],O=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[O]>"u"){for(const t of[I,w]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,O,{value:!0})}const et=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",K=(t="")=>t==="/"?"":t,nt=(t,e)=>t[0]==="~"?t.slice(1):K(e)+t,rt=(t="",e)=>et(j(K(t)),j(e)),j=t=>{try{return decodeURI(t)}catch{return t}},N={hook:tt,searchHook:Z,parser:B,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},J=m.createContext(N),b=()=>m.useContext(J),U={},A=m.createContext(U),st=()=>m.useContext(A),E=t=>{const[e,n]=t.hook(t);return[rt(t.base,e),H((r,s)=>n(nt(r,t.base),s))]},ft=()=>E(b()),D=(t,e,n,r)=>{const{pattern:s,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),u=s.exec(n)||[],[i,...h]=u;return i!==void 0?[!0,(()=>{const a=o!==!1?Object.fromEntries(o.map((y,f)=>[y,h[f]])):u.groups;let l={...h};return a&&Object.assign(l,a),l})(),...r?[i]:[]]:[!1,null]},ot=({children:t,...e})=>{var l,y;const n=b(),r=e.hook?N:n;let s=r;const[o,u]=((l=e.ssrPath)==null?void 0:l.split("?"))??[];u&&(e.ssrSearch=u,e.ssrPath=o),e.hrefs=e.hrefs??((y=e.hook)==null?void 0:y.hrefs);let i=m.useRef({}),h=i.current,a=h;for(let f in r){const d=f==="base"?r[f]+(e[f]||""):e[f]||r[f];h===a&&d!==a[f]&&(i.current=a={...a}),a[f]=d,(d!==r[f]||d!==s[f])&&(s=a)}return m.createElement(J.Provider,{value:s,children:t})},_=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,at=t=>{let e=m.useRef(U);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},ht=({path:t,nest:e,match:n,...r})=>{const s=b(),[o]=E(s),[u,i,h]=n??D(s.parser,t,o,e),a=at({...st(),...i});if(!u)return null;const l=h?m.createElement(ot,{base:h},_(r,a)):_(r,a);return m.createElement(A.Provider,{value:a,children:l})},mt=m.forwardRef((t,e)=>{const n=b(),[r,s]=E(n),{to:o="",href:u=o,onClick:i,asChild:h,children:a,className:l,replace:y,state:f,...d}=t,S=H(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(i==null||i(v),v.defaultPrevented||(v.preventDefault(),s(u,t)))}),c=n.hrefs(u[0]==="~"?u.slice(1):n.base+u,n);return h&&m.isValidElement(a)?m.cloneElement(a,{onClick:S,href:c}):m.createElement("a",{...d,onClick:S,href:c,className:l!=null&&l.call?l(r===u):l,children:a,ref:e})}),T=t=>Array.isArray(t)?t.flatMap(e=>T(e&&e.type===m.Fragment?e.props.children:e)):[t],dt=({children:t,location:e})=>{const n=b(),[r]=E(n);for(const s of T(t)){let o=0;if(m.isValidElement(s)&&(o=D(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:o})}return null};export{mt as L,ht as R,dt as S,ut as c,lt as p,ft as u};
